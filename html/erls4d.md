### Определения

Система скилловая, параметрическая. Прокачка за опыт.

Вступление
-------

Зачем всё это?

Супер-пупер риалистичная система? Нет! Не претендую ни на реалистичность,
ни на супер-пупер. Я просто реализовал две старых идеи:

1. навыки по схеме как в 4-х героях (basic - advanced - expert - master -
grandmaster)
2. как в TES - вычисление основных значений параметров на основе навыков.

Второй подход полноценно реализовать получилось только для конверсии
персонжей из старых версий E.R.L.S. - при отсутствии ограничивающего фактора
велика вероятность появления манчкинов со "всеми параметрами по-максимуму".

Система разрабатывалась "от навыков" и предполагалось вычислять основные параметры на основе *накиданных* навыков. Не все игроки восприняли такую идею здраво и *накидывались* "по-старинке", сначала параметры, потом навыки.

Так как уровень прокачки навыка тесно связан с величиной параметра (а навык требует какого-то минимального значения параметра), можно накидываться с двух сторон:
1. Сначала параметры, потом навыки - "метод по-старинке"
2. Сначала навыки, потом параметры - "новый метод".

В принципе, разницы нет и мы рассмотрим оба варианта. Но сначала рассмотрим - какие же есть параметры и что есть "навыки".


Механика разрешения конфликтов
------------------------------

Типы бросков:
- против сложности;
- встречный;
- укидка;

## Простой бросок (против сложности)

Используется при решении какой-то задачи по навыку или при дистанционной атаке неручным оружием по цели (не луки, не пращи, не бросок камня).

Используется один шестигранный кубик, броски делаются против  _сложности_. Элементарная задача имеет сложность `2`, среднестатистическая – `4 - 5`.

Формула успешного броска такова:

    к6 + бонус навыка >= сложности

при этом атакующий имеет преимущество: при броске, равном сложности действие считается условно успешным (все
получилось, но мастер накладывает какое-то осложнение, впрочем, играющее чаще всего "флаффовую" роль).

В бою, впрочем, такое попадание означает царапину (которая не наказывается никакими штрафами и не дает хитов ранений)

Таким образом, с навыком `basic` (бонус `+1`) среднестатистическая задача решается с шансом `50%`.
Если навыка нет, персонаж получает штраф `-5` и бонус от половины  параметра:
`к6 + (парам/2) - 5 >= сложность`

К броску навыка и сложности добавляются ситуационные бонуса и штрафы. Как правило, вещи дают бонуса, ситуация увеличивает сложность. Нарастающий штраф при множественных провалах не используется (избегаем «спирали смерти»), штрафы за раны опциональны.

## Встречный бросок

Используется при PvP-ситуации или в бою рукопашном или на холодном оружии (или в дистанционном бою,
использующем оружие, зависящее от точности и координации рук: лук, праща, камень, бросок гранаты),
но только если цель активно противодействует.

    к6 + бонус навыка VS к6 + пассивный бонус от параметра

## Укидка (проверка эффективности параметра), он же "спас-бросок"

На к12-ом нужно кинуть значение меньше ПАРАМЕТР - ШТРАФ. Укидка **всегда** использует к12-ый кубик.

Параметры
---------

### Основные параметры

-	**ОФП** -- общая физическая подготовка. Влияет на выносливость, ЕЗ, физический урон (в ближнем бою).
-	**ЛОВКОСТЬ** -- на самом деле правильно писать "Нервы" или "Neuro". Этот параметр отвечает за эффективность работы нервной и мышечной системы. Влияет на ЕД (единицы действий).
-	**РАЗУМ** -- отвечает за ментальную сферу персонажа, в том числе должен отвечать и за магию.
-	**ДУХ** -- отвечает за духовную сферу (и псионику)

Взрослым персонажам дается `29` очков параметров - расставляй как хочешь, главное помни, что параметр `1-3` у взрослого человека означает соответствующую группу инвалидности.
У подростков и детей параметры пропорционально ниже и поинтов дается меньше, а именно: `4+возраст`.

Таким образом, средний параметр равен `7`.
### Уточняющие параметры (аспекты)

Основных параметров всего 4 и каждый разделяется на два уточняющих.

-	**ОФП**
	-	**сила** -- аспект физической силы. Развитость мускулов, мощь удара, грузоподъемность. Влияет на урон в	ближнем бою;
	-	**здоровье** -- аспект здоровья. Развитость всего организма,  способность переносить непогоду или длительные нагрузки. Влияет на выносливость и ЕЗ;
-	**ЛОВКОСТЬ**
	-	**подвижность** -- аспект подвижности. Развитость нервной системы, управляющей мышцами. Влияет на ЕД;
	-	**меткость** -- аспект меткости. Влияет на эффективность попадания в бою, кроме того это способность оценивать ситуацию и управлять своими действиями эффективней;
-	**РАЗУМ**
	-	**интеллект** -- аспект интеллекта; способность решать логические и комбинаторные задачи,
способность к анализу;
	-	**память** -- аспект памяти способность запоминать и удерживать в память большое число факторов при анализе;
-	**ДУХ**
	-	**воля** -- аспект воли внутренняя сила духа, способность противостоять невзгодам и неудачам;
	-	**интуиция** -- аспект интуиции открытость для мира (не уязвимость, а именно открытость). Кроме бросков "на
интуицию" влияет на скорость восстановления ментальной (псионической) энергии. Ну... должна влиять.

Как правило, **уточняющий** параметр находится в пределах `-1..+2`, при этом сумма уточняющих параметров одной группы не должна превышать `+1`.

Параметры - по сути скорость прокачки навыков или порог их максимальной прокачки.
### Пассивный бонус

Пассивный бонус равен: `параметр / 2` (с округлением вниз).

Если мы используем отсутствующий навык, этот бонус добавляется к броску эффективности. При этом накладывается и штраф
 за отсутствие навыка, равный `-4`.
### Производные параметры

@todo: стамина, хп, экшен поинты, стан DR

Навыки
------

_Навык -- это деятельность, сформированная путем повторения и доведения до автоматизма. Всякий новый способ действия, протекая первоначально как некоторое самостоятельное, развёрнутое и сознательное, затем в результате многократных повторений может осуществляться уже в качестве автоматически выполняемого компонента деятельности._

### Уровни навыков

Навыки прокачиваются от Novice до Legendary и дают прогрессирующий бонус.

| Уровень прокачки 	| Бонус к броску 	|
|------------------	|----------------	|
| No skill         	| -5             	|
| Novice           	| 0              	|
| Basic            	| +1             	|
| Advanced         	| +2             	|
| Expert           	| +3             	|
| Master           	| +5             	|
| Grandmaster      	| +8             	|
| Legendary        	| +13            	|

Гигантский бонус от `Legendary` навыка компенсируется тем, что _прокачаться_ до этого уровня нельзя. Надо иметь навык на уровне `grandmaster` и действительно войти в легенды!

На старте игрок может взять до дюжины навыков:

| Уровень прокачки: | Master | Expert | Advanced | Basic | Novice |
|-------------------|:------:|:------:|:--------:|:-----:|:------:|
| Навыков           |    1   |    2   |     4    |   5   |    *   |

[*] Опционально: (память/2)


В большинстве случаев при начальной накидке раскладка навыков именно такая, но мастер конечно же может изменить числа по своему усмотрению. У подростков навыки _прокачаны_ пропорционально меньше - так, к примеру, у них редко бывает больше одного **эксперта**.

### Параметры и навыки

Но не всё так просто! Сам параметр ограничивает навык сверху:

| Уровень прокачки 	| Требования к параметру 	|
|------------------	|------------------------	|
| Novice           	| 1..2                   	|
| Basic            	| 3..4                   	|
| Advanced         	| 5..6                   	|
| Expert           	| 7..8                   	|
| Master           	| 9..11                  	|
| Grandmaster      	| 12+                    	|
| Legendary        	|                        	|

#### Пример персонажа

| | |
|----------|---|
| ОФП      	| 9 	|
| Ловкость 	| 3 	|
| Разум    	| 5 	|
| Воля     	| 7 	|

Ограничения на начальные значения навыков таковы:<br>

|          	| можно взять только навык, зависящий от: 	|
|----------	|-----------------------------------------	|
| Master   	| ОФП                                     	|
| Expert   	| ОФП, Воля                               	|
| Advanced 	| ОФП, Воля, Разум                        	|
| Basic    	| Навык, зависящий от любого параметра    	|

### Novice-навыки

Навыки новичка. Эти навыки не имеют бонусов, но не дают и штрафов. Считается, что получить навык на novice можно только с учителем.
Опциональное правило: количество `novice`-навыков равно половине значения памяти.
Зачем нужны novice-навыки? С их помощью я сокращал разрыв между игроками, уже отыгравшими несколько сессий и только что пришедшими. @todo: переформулировать

### Сводная таблица


| Уровень прокачки | Бонус к броску | Требования к параметру | Пассивный бонус от параметра |
|------------------|----------------|------------------------|------------------------------|
| No skill | -5 |  |  |
| Novice | 0 | 1..2 | 0 |
| Basic | +1 | 3..4 | 2 |
| Advanced | +2 | 5..6 | 3 |
| Expert | +3 | 7..8 | 4 |
| Master | +5 | 9+ | 5 |
| Grandmaster | +8 | 12+ | 6 |
| Legendary | +13 | любой | * |


## Накидка
- Оценочное количество параметров: 4+возраст. После 25-27 лет параметры перестают расти автоматически (+1 к параметру в год), требуются специальные тренировки (+2 за 3 года, но не более +12).
- Подростки редко когда имеют больше 1 эксперта – для достижения этого уровня требуются профессиональные занятия.

# Хиты и ранения (опциональное правило)

При получении урона не только уменьшается текущий уровень здоровья (УЗ), но и оцениваются полученные ранения.

Опциональное правило: полученные ранения дают штраф на все совершаемые действия (особенно физические). Это правило,
правда, может породить "[спираль смерти](http://ru.rpg.wikia.com/wiki/Спираль_смерти)". Для облегчения участи
персонажей можно использовать уменьшенные штрафы (указаны в скобах) или не использовать это правило вообще. Так,
в сеттингах "ЛенУГРО1924" и "Информопрорыв" мы её и не используем.

|   Ранения   | Порог урона | Штраф на действия | Множитель хитов ранений |
|:-----------:|:-----------:|:-----------------:|:-----------------------:|
| Легкие      | до 0,2 * ХП |         0         |           x5            |
| Средние     | до 0,4 * ХП |        -1 (-1)    |           x10           |
| Тяжелые     | до 0,6 * ХП |        -2 (-1)    |           x10           |
| Критические | до 0,8 * ХП |        -4 (-2)    |           x20           |
| Смертельное |   -ОПФ ХП   |        -8 (-4)    |           x40           |

@test: При критическом попадании (пропущенный критический хит) множитель удваивается.

Как правило, смертельное ранение убивает персонажа, если ему конечно не оказать срочную медицинскую (или магическую)
помощь.

Тяжесть ранений суммируется: два лёгких можно считать за одно среднее, два средних - за одно тяжелое,
два тяжелых - за критическое, два критических ранения скорее всего убивают персонажа.

Полученные ранения увеличивают счётчик "хитов ранений" на величину, равную нанесенному урону увеличенному во
*множитель хитов ранений* раз:

    Хиты ранений = полученный урон X множитель хитов ранений

## Противодействие шоковому урону (и станнеру)

Укидка в ОФП со штрафом, равным **мощности** станнера.

При последовательных воздействиях с интервалом менее N раундов (N равно мощности станнера) штраф на ОФП накапливается.

## Бросок от потери сознания при ранении

Укидка в ОФП со штрафом, равным сумме штрафов на действия (от ранений)

## Лечение

Хиты ранений используются для отражения длительности лечения. Как правило, хиты ранений регенерируют со скоростью

    ОФП + бонус медицины врача  ХП ранений в час



## Опыт

За каждую сессию персонаж **всегда** получает одну экспинку в навыки и одну экспинку в параметры. При этом мастер
оставляет за собой право наградить игрока по своему усмотрению (дополнительно) - за интересные решения, элегантные действия или просто так, за красивые глаза.

Куда и как можно потратить **экспинки**?

Для прокачки **параметра** с `N` до `N+1` требуется `N+1` опыта в параметрах.

Опыт в навыках тратится так:

| исходный      | результирующий | опыт      |
|:-------------:|:--------------:|:---------:|
| открыть       | Novice         | 1         |
| Novice        | Basic          | 1         |
| Basic         | Advanced       | 2         |
| Advanced      | Expert         | 3         |
| Expert        | Master         | 5         |
| Master        | Grandmaster    | 8         |
| Grandmaster   | Legendary      | 13        |

С учителем получение novice-навыка бесплатное, а вот самообучение стоит 1 опыта. 

Обучение же навыку делается так:

    к6 + бонус интеллекта -3 VS сложность 

@todo: Сложность определяется... сложностью навыка? Редкостью? 
## Снова о механике разрешения конфликтов

Теперь, вооружившись знаниями о параметрах и навыках, посмотрим на механику еще раз.

...

При решении задачи без навыка бонус к броску равен:

Аррис: `- 3 +  параметр/2 `

### Типичные применения параметров:

- ОФП -- ??
- Ловкость -- поиск предметов
- Разум -- ??
- Воля -- ??




## Боевая стойка

Различные стили рукопашного боя (и навыков холодного оружия) позволяют использовать различные боевые стойки.

Боевая стойка дает фиксированные боевые модификаторы, добавляющиеся перед всеми вычислениями. Возможные модификаторы
таковы:
- модификатор атаки
- модификатор защиты (для противника увеличивается сложность попадания)
- модификатор урона
- модификатор инициативы (бонус на инициативу)
- модификатор скорости атаки (атаки стоят дешевле или дороже)

Примерное (!) соотношение модификаторов от стоек лучше всего изобразить пятилучевой звездой:

            У
        С       А

          З   И

- У - мощная стойка, увеличивающая наносимый в рукопашном (и холодном бою) урон. Мощные силовые удары ценой снижения
защиты и скорости атаки;
- С - скоростная стойка. Уменьшается стоимость атак, но при этом уменьшается и эффективность атак,
и количество единиц действия в раунде;
- А - атакующая стойка. Увеличивается эффективность атаки ценой снижения защиты и увеличения стоимости атаки;
- Д - стойка движения, увеличивающая базовую инициативу (больше единиц действий в раунде) ценой менее мощных атак.
Стоимость атаки в ЕД не меняется или меняется незначительно. Эта "стойка" используется для быстрых перемещений в бою,
 прыжков, перекатов и редких ударов.
- З - защитная стойка. Увеличивается пассивный бонус на уворот (или сложность попадания) ценой снижения эффективности
 атаки и урона.

Величина модификаторов зависит от уровня навыка.

Смена стойки стоит AP. При этом

Стойку можно и не использовать - тогда модификаторы не применяются.

### Виды стоек

Буквы в ячейках показывают, на каком уровне появляются бонусы. Бонусы последовательные, +1/+2/+3 итд.
Так, BEM означает:
- +1 на Basic
- +2 на Expert
- +3 на Master
Минус перед аббревиатурой показывает, на каких уровнях даются штрафы.

Следует помнить, что уровень Legendary дает дополнительное улучшение +1 на все модификаторы.

|      Стойка     |     Урон    |    Атака   |  Инициатива | Защита  | Скорость |
|:---------------:|:-----------:|:----------:|:-----------:|:-------:|:--------:|
| Атакующая       |    EG       |   BEM      |    -AM      |  -BEM   |   EG     |
| Инициативная    |    -BEG     |    EG      |   BEM       |  AEG    |   -A     |
| Защитная        |    -AM      |   -BEG     |   EG        |  BEM    |   AM     |
| Скоростная      |    EG       |    -AM     |    -EG      |   AM    |  BEM     |
| Мощная          |    BEM      |    EG      |    -AM      |  -AM    |   EG     |
| Песчаный вихрь  |             |            |    BEG      |   EM    |   AM     |
| Битва гнева     |    BEG      |    AM      |    -AM      |  -AEG   |  -AM     |
| Тростник        |   -BEMG     |   -BEM     |    AEG      |  BEMG   |          |
| Рукопашка ВКС   |    BEM      |    AEG     |    -AM      |   EM    |   -EG    |
|                 |             |            |             |         |          |

Кроме того, некоторые боевые стили могут давать уникальные бонуса.


## Психический бой

Это взаимодействие является PvP и использует встречные броски.

    d6 + Skill Effectiveness + воля/2 VS d6 + воля/2 + бонуса на защиту (амулеты итп)

Как обычно, атакующий имеет при равной эффективности преимущество.
## Навыки: подробнее (даются для сеттинга "Информопрорыв")

Оружие:

| Тип                                   | Рукопашное | Баллистическое | Гаусс    | Лазер    | Плазма |
|---------------------------------------|------------|----------------|----------|----------|--------|
| Легкое                                | Ловкость   | Ловкость       | Ловкость | Ловкость |       |
| Среднее                               | Ловкость   | Ловкость       | Ловкость | ОФП      |       |
| Тяжелое                               | ОФП        | ОФП            | ОФП      | Разум    | ОФП    |
| Стационарное (станковое, турели, ЭМД) |           | ОФП            | ОФП      | Разум    | ОФП    |
| Корабельное (орудийные системы)       |           | Разум          | Разум    | Разум    | Разум  |

- **Снайпер**: Использование снайперского комплекса требует навыка «Снайпер» (разум). Различные системы снайперского огня требуют различного навыка. Стрельба по-прежнему ведется по ведущему параметру, но работа с целью идет по навыку «снайпер».   - Исключение – навык **«Sharpshooter»** (ловкость), позволяет делать снайперские выстрелы с луком.
- **БТП**: Боевые тактические процессоры дают бонус к навыку и могут убирать штрафы на условия видимости, темноту или тектонические помехи.

Транспортные средства:

| Тип                                | Наземная                         | Морская                               | Атмосферная                                     | Космическая |
|------------------------------------|----------------------------------|---------------------------------------|-------------------------------------------------|-------------|
| **Легкая**                         | Ловкость (мото, авто)            | ОФП (весельные лодки,  байдарки, итп) | Ловкость (флайдеры),  ОФП (парашют, дельтаплан) | Разум       |
| **Средняя**                        | Ловкость (автобусы,  автомобили) | Ловкость (катера, малые  корабли)     | Разум (самолеты, флаеры)                        | Разум       |
| **Тяжелая**                        | ОФП (грузовики, танки)           | Разум (корабли, навигация)            | Разум (шаттлы, пилотирование)                   | Разум       |
| ЭМД/ЭМК                            | ОФП                              | -                                     | -                                               | -           |
| **Меха** (если сеттинг  позволяет) | ОФП                              | -                                     | минимум: Разум или ОФП                          | Разум?      |
| Персональные                       | Ловкость (ролики, скейт)         | Ловкость (скутер)                     | Воля (ковер-самолет и т.п.)                     |             | Воля (драконы)


ЭМД(К) разных моделей повышают низкий ОФП до определенной величины. Но если ОФП больше – он не меняется. Т.е. [1..7] ОФП повышается до `8`, но `10` ОФП не меняется.
`max( max (свой ; доспеха ) ; min( свой; доспеха ))`

Навык на доспехи компенсирует штраф на ловкость, но не выше своей эффективности (если только на легендарном уровне)

К примеру, fullplate дает `-5` ловкость. При этом только на МАСТЕРЕ потери ловкости компенсированы полностью.

Остается под вопросом – требует ли «ремонт» дополнительных навыков для починки чего-то в специфической области. Неоднозначность рассчета. Без ремонта можно ремонтировать, например механику: (-2 + бонус механики/оружейника) итп

# Особые возможности навыков

Бодибилдинг: Дает +хп = эффективности;

# Паранормальные способности

Ветви способностей всего три - по осям _векторого базиса_.

## Одаренность

Дает сверх (10 * бонус одаренности) ХП и регенерацию (бонус) хп в минуту.

## Магия

## Псионические силы

Биометаболика дает хп = 2*эфф. (дает так же +1*эфф АП, либо наоборот +2*эфф АП, +1*эфф ХП)
Биоэнергетика: +эфф ХП

## Паранормальные способности (пси, магия, путь Источника)

Все паранормальные способности являются навыками.

В каждом навыке на каждом уровне прокачки может быть один или несколько спецприёмов. Это могут быть как отдельные
спецприёмы (для широких навыков типа "шаманизм") так и "апгрейды" приёмов более низкого уровня (к примеру,
паранормальный навык "телекинез" не дает новых спецприёмов, но изменяются параметры телекинеза).

Собственно паранормальные навыки делятся на узкие и широкие.

Узкий навык дает на уровне basic один спецприём, который развивается далее.
Широкий навык дает на разных уровнях несколько спецприёмов, которые не развиваются (или развиваются слабо).

@todo: прописать навыки критических атак и промахов для псионических навыков
